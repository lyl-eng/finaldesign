# 多智能体模式与模型关系说明

## 核心概念

### 多智能体模式 ≠ 模型

**多智能体模式**是一个**工作流架构**，它定义了翻译的流程和步骤。  
**DeepSeek**是**底层的大语言模型**，用于执行具体的任务。

## 关系说明

```
┌─────────────────────────────────────────┐
│      多智能体工作流架构（架构层）        │
├─────────────────────────────────────────┤
│  Agent 1: 术语识别                      │
│    ↓ 调用                                │
│  Agent 2: 翻译执行                      │
│    ↓ 调用                                │
│  Agent 3: 回译验证                      │
│    ↓ 调用                                │
│  Agent 4: 版本融合                      │
└─────────────────────────────────────────┘
              ↓ 所有Agent都需要
┌─────────────────────────────────────────┐
│      底层LLM模型（执行层）               │
│      DeepSeek (deepseek-chat)           │
└─────────────────────────────────────────┘
```

## 多智能体模式如何使用DeepSeek

### 1. 术语识别阶段
- **Agent**: TerminologyEntityAgent
- **任务**: 识别领域术语、文化负载词
- **调用**: 使用DeepSeek模型分析文本，提取术语

### 2. 翻译执行阶段
- **Agent**: TranslationRefinementAgent
- **任务**: 多步骤翻译（理解→分解→转换→润色）
- **调用**: 使用DeepSeek模型进行翻译

### 3. 多版本生成阶段
- **Agent**: TranslationRefinementAgent
- **任务**: 生成直译版、意译版、风格化版
- **调用**: 多次调用DeepSeek模型生成不同版本

### 4. 版本融合阶段
- **Agent**: TranslationRefinementAgent
- **任务**: 智能评选和融合多个版本
- **调用**: 使用DeepSeek模型评估和融合

### 5. 回译验证阶段
- **Agent**: TranslationRefinementAgent
- **任务**: 回译验证、质量评估、自我修正
- **调用**: 使用DeepSeek模型进行回译和质量评估

## 对比：传统模式 vs 多智能体模式

### 传统模式
```
原文 → [DeepSeek翻译] → 译文
```
- **调用次数**: 1次
- **流程**: 简单直接

### 多智能体模式
```
原文 
  → [Agent 1: 术语识别] (调用DeepSeek)
  → [Agent 2: 多步骤翻译] (调用DeepSeek)
  → [Agent 2: 多版本生成] (调用DeepSeek × 3次)
  → [Agent 2: 版本融合] (调用DeepSeek)
  → [Agent 2: 回译验证] (调用DeepSeek × 2次)
  → 最终译文
```
- **调用次数**: 约7-10次（取决于文本复杂度）
- **流程**: 多步骤、迭代优化

## 为什么多智能体模式仍然使用DeepSeek？

1. **模型是执行工具**
   - 多智能体模式定义了"做什么"和"怎么做"
   - DeepSeek模型负责"执行"这些任务

2. **可以切换模型**
   - 你可以在"接口管理"页面切换到其他模型
   - 多智能体模式会使用你选择的任何模型
   - 例如：可以切换到GPT-4、Claude、Gemini等

3. **架构与实现分离**
   - **架构**（多智能体工作流）：定义了翻译的流程
   - **实现**（DeepSeek模型）：执行具体的任务

## 实际执行流程示例

假设你翻译一段文本：

### 传统模式
1. 调用DeepSeek 1次 → 得到译文

### 多智能体模式
1. **预处理**: 分析文本结构（不调用模型）
2. **术语识别**: 调用DeepSeek 1次 → 识别术语
3. **翻译**: 调用DeepSeek 1次 → 初始翻译
4. **多版本生成**: 调用DeepSeek 3次 → 生成3个版本
5. **版本融合**: 调用DeepSeek 1次 → 融合版本
6. **回译验证**: 调用DeepSeek 1次 → 回译
7. **质量评估**: 调用DeepSeek 1次 → 评估质量
8. **修正**: 如有问题，调用DeepSeek 1次 → 修正

**总计**: 约8-9次DeepSeek调用

## 总结

- ✅ **多智能体模式已启用**：你使用的是多智能体工作流架构
- ✅ **DeepSeek是执行模型**：所有Agent都使用DeepSeek来执行任务
- ✅ **可以切换模型**：你可以在"接口管理"中切换到其他模型，多智能体模式会自动使用新模型
- ⚠️ **成本增加**：多智能体模式会进行多次API调用，成本比传统模式高

## 如何验证多智能体模式是否在工作？

查看翻译日志，你应该能看到：
- "阶段1: 译前预处理"
- "阶段2: 术语与实体识别"
- "阶段3: 翻译与优化"
- 多次API调用记录

如果只看到一次翻译调用，可能是传统模式在工作。

